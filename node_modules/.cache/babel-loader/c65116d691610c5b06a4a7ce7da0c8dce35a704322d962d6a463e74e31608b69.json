{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\thato\\\\Downloads\\\\car-app\\\\src\\\\components\\\\trades\\\\TradeOfferModal.tsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useMemo } from 'react';\nimport { motion } from 'framer-motion';\nimport { X, Car, DollarSign, Search, Check, ArrowRight } from 'lucide-react';\nimport { useApp } from '../../context/AppContext.tsx';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport function TradeOfferModal({\n  onClose,\n  selectedListing\n}) {\n  _s();\n  var _state$currentUser2, _state$currentUser4;\n  const {\n    state,\n    addTrade\n  } = useApp();\n  const [step, setStep] = useState('select-listing');\n  const [targetListing, setTargetListing] = useState(selectedListing || null);\n  const [selectedVehicles, setSelectedVehicles] = useState([]);\n  const [cashAmount, setCashAmount] = useState(0);\n  const [message, setMessage] = useState('');\n  const [searchTerm, setSearchTerm] = useState('');\n  const [loading, setLoading] = useState(false);\n\n  // Available vehicles (user's own vehicles that aren't listed/auctioned)\n  const availableVehicles = useMemo(() => {\n    return state.vehicles.filter(vehicle => {\n      var _state$currentUser;\n      return !vehicle.isListed && !vehicle.isAuctioned && vehicle.ownerId === ((_state$currentUser = state.currentUser) === null || _state$currentUser === void 0 ? void 0 : _state$currentUser.id);\n    });\n  }, [state.vehicles, (_state$currentUser2 = state.currentUser) === null || _state$currentUser2 === void 0 ? void 0 : _state$currentUser2.id]);\n\n  // Available listings to trade for (exclude user's own listings)\n  const availableListings = useMemo(() => {\n    return state.allListings.filter(listing => {\n      var _state$currentUser3;\n      return listing.isActive && listing.sellerId !== ((_state$currentUser3 = state.currentUser) === null || _state$currentUser3 === void 0 ? void 0 : _state$currentUser3.id) && (!searchTerm || listing.title.toLowerCase().includes(searchTerm.toLowerCase()));\n    });\n  }, [state.allListings, (_state$currentUser4 = state.currentUser) === null || _state$currentUser4 === void 0 ? void 0 : _state$currentUser4.id, searchTerm]);\n\n  // Calculate total offer value\n  const totalOfferValue = useMemo(() => {\n    const vehicleValue = selectedVehicles.reduce((sum, vId) => {\n      const vehicle = availableVehicles.find(v => v.id === vId);\n      return sum + ((vehicle === null || vehicle === void 0 ? void 0 : vehicle.customPrice) || (vehicle === null || vehicle === void 0 ? void 0 : vehicle.estimatedValue) || 0);\n    }, 0);\n    return vehicleValue + cashAmount;\n  }, [selectedVehicles, cashAmount, availableVehicles]);\n  const handleVehicleToggle = vehicleId => {\n    setSelectedVehicles(prev => prev.includes(vehicleId) ? prev.filter(id => id !== vehicleId) : [...prev, vehicleId]);\n  };\n  const handleSubmitTrade = async () => {\n    if (!targetListing) return;\n    setLoading(true);\n    try {\n      const tradeData = {\n        listingId: targetListing.id,\n        offererUserId: state.currentUser.id,\n        receiverUserId: targetListing.sellerId,\n        status: 'pending',\n        offererCashAmount: cashAmount,\n        offererVehicleIds: selectedVehicles,\n        message,\n        tradeHistory: [{\n          id: `history_${Date.now()}`,\n          action: 'created',\n          userId: state.currentUser.id,\n          timestamp: new Date().toISOString(),\n          offererCashAmount: cashAmount,\n          offererVehicleIds: selectedVehicles,\n          message\n        }]\n      };\n      console.log('🚀 Creating trade with data:', tradeData);\n      await addTrade(tradeData);\n      console.log('✅ Trade created successfully');\n      onClose();\n    } catch (error) {\n      console.error('❌ Error creating trade:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n  const renderListingSelection = () => /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"space-y-6\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"text-2xl font-bold text-primary-100 mb-2\",\n        children: \"Select a Listing to Trade For\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-primary-300\",\n        children: \"Choose which vehicle you'd like to make a trade offer on\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"relative\",\n      children: [/*#__PURE__*/_jsxDEV(Search, {\n        className: \"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-primary-400\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        placeholder: \"Search listings...\",\n        value: searchTerm,\n        onChange: e => setSearchTerm(e.target.value),\n        className: \"input-field pl-10\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"max-h-96 overflow-y-auto space-y-3\",\n      children: availableListings.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-center py-8\",\n        children: [/*#__PURE__*/_jsxDEV(Car, {\n          className: \"w-12 h-12 mx-auto mb-4 text-primary-400\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 123,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-primary-300\",\n          children: \"No available listings found\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 124,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 11\n      }, this) : availableListings.map(listing => {\n        var _vehicle$images;\n        const vehicle = listing.vehicle || state.vehicles.find(v => v.id === listing.vehicleId);\n        const seller = listing.seller || state.users.find(u => u.id === listing.sellerId);\n        return /*#__PURE__*/_jsxDEV(motion.div, {\n          whileHover: {\n            scale: 1.02\n          },\n          className: \"glass-effect rounded-xl p-4 cursor-pointer hover:bg-primary-800/20 transition-all\",\n          onClick: () => {\n            setTargetListing(listing);\n            setStep('build-offer');\n          },\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center space-x-4\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"w-16 h-16 bg-primary-800/30 rounded-lg flex items-center justify-center\",\n              children: vehicle !== null && vehicle !== void 0 && (_vehicle$images = vehicle.images) !== null && _vehicle$images !== void 0 && _vehicle$images[0] ? /*#__PURE__*/_jsxDEV(\"img\", {\n                src: vehicle.images[0],\n                alt: listing.title,\n                className: \"w-full h-full object-cover rounded-lg\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 144,\n                columnNumber: 23\n              }, this) : /*#__PURE__*/_jsxDEV(Car, {\n                className: \"w-8 h-8 text-primary-400\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 150,\n                columnNumber: 23\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 142,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex-1\",\n              children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                className: \"font-semibold text-primary-100\",\n                children: listing.title\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 154,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-sm text-primary-300\",\n                children: vehicle && `${vehicle.year} ${vehicle.make} ${vehicle.model}`\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 155,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex items-center justify-between mt-1\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"text-green-400 font-bold\",\n                  children: [\"$\", listing.price.toLocaleString()]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 159,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"text-sm text-primary-400\",\n                  children: [\"by @\", (seller === null || seller === void 0 ? void 0 : seller.username) || 'Unknown']\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 162,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 158,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 153,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(ArrowRight, {\n              className: \"w-5 h-5 text-primary-400\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 167,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 141,\n            columnNumber: 17\n          }, this)\n        }, listing.id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 132,\n          columnNumber: 15\n        }, this);\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 101,\n    columnNumber: 5\n  }, this);\n  const renderOfferBuilder = () => {\n    var _targetVehicle$images;\n    const targetVehicle = (targetListing === null || targetListing === void 0 ? void 0 : targetListing.vehicle) || state.vehicles.find(v => v.id === (targetListing === null || targetListing === void 0 ? void 0 : targetListing.vehicleId));\n    const targetSeller = (targetListing === null || targetListing === void 0 ? void 0 : targetListing.seller) || state.users.find(u => u.id === (targetListing === null || targetListing === void 0 ? void 0 : targetListing.sellerId));\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"space-y-6\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => setStep('select-listing'),\n          className: \"text-blue-400 hover:text-blue-300 text-sm mb-4\",\n          children: \"\\u2190 Back to listing selection\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 184,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"text-2xl font-bold text-primary-100 mb-2\",\n          children: \"Build Your Trade Offer\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 190,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-primary-300\",\n          children: \"Select vehicles and cash to offer for this listing\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 191,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 183,\n        columnNumber: 9\n      }, this), targetListing && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"glass-effect rounded-xl p-4 border border-blue-500/30\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center space-x-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"w-16 h-16 bg-primary-800/30 rounded-lg flex items-center justify-center\",\n            children: targetVehicle !== null && targetVehicle !== void 0 && (_targetVehicle$images = targetVehicle.images) !== null && _targetVehicle$images !== void 0 && _targetVehicle$images[0] ? /*#__PURE__*/_jsxDEV(\"img\", {\n              src: targetVehicle.images[0],\n              alt: targetListing.title,\n              className: \"w-full h-full object-cover rounded-lg\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 200,\n              columnNumber: 19\n            }, this) : /*#__PURE__*/_jsxDEV(Car, {\n              className: \"w-8 h-8 text-primary-400\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 206,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 198,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex-1\",\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              className: \"font-semibold text-primary-100\",\n              children: targetListing.title\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 210,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-sm text-primary-300\",\n              children: targetVehicle && `${targetVehicle.year} ${targetVehicle.make} ${targetVehicle.model}`\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 211,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center justify-between mt-1\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"text-green-400 font-bold\",\n                children: [\"$\", targetListing.price.toLocaleString()]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 215,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"text-sm text-primary-400\",\n                children: [\"by @\", (targetSeller === null || targetSeller === void 0 ? void 0 : targetSeller.username) || 'Unknown']\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 218,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 214,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 209,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 197,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 196,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"text-lg font-semibold text-primary-100 mb-4\",\n          children: \"Your Vehicles\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 229,\n          columnNumber: 11\n        }, this), availableVehicles.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"glass-effect rounded-xl p-6 text-center\",\n          children: [/*#__PURE__*/_jsxDEV(Car, {\n            className: \"w-12 h-12 mx-auto mb-4 text-primary-400\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 232,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-primary-300\",\n            children: \"No available vehicles to trade\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 233,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-sm text-primary-400 mt-1\",\n            children: \"You can only trade vehicles that aren't currently listed or in auction\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 234,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 231,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"grid grid-cols-1 md:grid-cols-2 gap-4\",\n          children: availableVehicles.map(vehicle => {\n            var _vehicle$images2;\n            return /*#__PURE__*/_jsxDEV(motion.div, {\n              whileTap: {\n                scale: 0.98\n              },\n              className: `glass-effect rounded-xl p-4 cursor-pointer transition-all ${selectedVehicles.includes(vehicle.id) ? 'border-2 border-blue-500 bg-blue-500/10' : 'border border-primary-700/30 hover:border-primary-600/50'}`,\n              onClick: () => handleVehicleToggle(vehicle.id),\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex items-center space-x-4\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"w-12 h-12 bg-primary-800/30 rounded-lg flex items-center justify-center relative\",\n                  children: [(_vehicle$images2 = vehicle.images) !== null && _vehicle$images2 !== void 0 && _vehicle$images2[0] ? /*#__PURE__*/_jsxDEV(\"img\", {\n                    src: vehicle.images[0],\n                    alt: `${vehicle.year} ${vehicle.make} ${vehicle.model}`,\n                    className: \"w-full h-full object-cover rounded-lg\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 254,\n                    columnNumber: 25\n                  }, this) : /*#__PURE__*/_jsxDEV(Car, {\n                    className: \"w-6 h-6 text-primary-400\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 260,\n                    columnNumber: 25\n                  }, this), selectedVehicles.includes(vehicle.id) && /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"absolute -top-2 -right-2 w-6 h-6 bg-blue-500 rounded-full flex items-center justify-center\",\n                    children: /*#__PURE__*/_jsxDEV(Check, {\n                      className: \"w-4 h-4 text-white\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 264,\n                      columnNumber: 27\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 263,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 252,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex-1\",\n                  children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                    className: \"font-medium text-primary-100\",\n                    children: [vehicle.year, \" \", vehicle.make, \" \", vehicle.model]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 269,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"text-sm text-primary-300\",\n                    children: [vehicle.mileage.toLocaleString(), \" mi\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 272,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"text-green-400 font-medium\",\n                    children: [\"$\", (vehicle.customPrice || vehicle.estimatedValue).toLocaleString()]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 275,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 268,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 251,\n                columnNumber: 19\n              }, this)\n            }, vehicle.id, false, {\n              fileName: _jsxFileName,\n              lineNumber: 241,\n              columnNumber: 17\n            }, this);\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 239,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 228,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"text-lg font-semibold text-primary-100 mb-4\",\n          children: \"Cash Amount\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 288,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"glass-effect rounded-xl p-4\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center space-x-4\",\n            children: [/*#__PURE__*/_jsxDEV(DollarSign, {\n              className: \"w-6 h-6 text-green-400\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 291,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex-1\",\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"number\",\n                value: cashAmount === 0 ? '' : cashAmount,\n                onChange: e => setCashAmount(Number(e.target.value) || 0),\n                placeholder: \"0\",\n                className: \"input-field text-lg font-bold\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 293,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-sm text-primary-400 mt-1\",\n                children: cashAmount > 0 ? \"You're offering cash in addition to vehicles\" : cashAmount < 0 ? \"You're requesting cash back from the seller\" : \"No cash involved in this trade\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 300,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 292,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 290,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 289,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 287,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"text-lg font-semibold text-primary-100 mb-4\",\n          children: \"Message (Optional)\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 315,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n          value: message,\n          onChange: e => setMessage(e.target.value),\n          placeholder: \"Add a personal message to your trade offer...\",\n          className: \"input-field h-24 resize-none\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 316,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 314,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"glass-effect rounded-xl p-4 border border-green-500/30\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"text-lg font-semibold text-primary-100 mb-4\",\n          children: \"Trade Summary\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 326,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"space-y-2\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex justify-between\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text-primary-300\",\n              children: [\"Vehicles (\", selectedVehicles.length, \"):\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 329,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text-primary-100 font-medium\",\n              children: [\"$\", selectedVehicles.reduce((sum, vId) => {\n                const vehicle = availableVehicles.find(v => v.id === vId);\n                return sum + ((vehicle === null || vehicle === void 0 ? void 0 : vehicle.customPrice) || (vehicle === null || vehicle === void 0 ? void 0 : vehicle.estimatedValue) || 0);\n              }, 0).toLocaleString()]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 330,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 328,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex justify-between\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text-primary-300\",\n              children: \"Cash:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 338,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: `font-medium ${cashAmount >= 0 ? 'text-green-400' : 'text-red-400'}`,\n              children: [cashAmount >= 0 ? '+' : '', \"$\", cashAmount.toLocaleString()]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 339,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 337,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"border-t border-primary-700/30 pt-2\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex justify-between\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"text-primary-100 font-semibold\",\n                children: \"Total Offer Value:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 345,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"text-green-400 font-bold text-lg\",\n                children: [\"$\", totalOfferValue.toLocaleString()]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 346,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 344,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 343,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 327,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 325,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex space-x-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: onClose,\n          className: \"btn-secondary flex-1\",\n          children: \"Cancel\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 356,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: handleSubmitTrade,\n          disabled: loading || selectedVehicles.length === 0 && cashAmount === 0,\n          className: \"btn-primary flex-1\",\n          children: loading ? 'Sending...' : 'Send Trade Offer'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 362,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 355,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 182,\n      columnNumber: 7\n    }, this);\n  };\n  return /*#__PURE__*/_jsxDEV(motion.div, {\n    initial: {\n      opacity: 0\n    },\n    animate: {\n      opacity: 1\n    },\n    exit: {\n      opacity: 0\n    },\n    className: \"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50\",\n    onClick: e => e.target === e.currentTarget && onClose(),\n    children: /*#__PURE__*/_jsxDEV(motion.div, {\n      initial: {\n        scale: 0.9,\n        opacity: 0\n      },\n      animate: {\n        scale: 1,\n        opacity: 1\n      },\n      exit: {\n        scale: 0.9,\n        opacity: 0\n      },\n      className: \"glass-effect rounded-2xl w-full max-w-4xl max-h-[90vh] overflow-y-auto\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center justify-between p-6 border-b border-primary-700/30\",\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \"text-2xl font-bold text-primary-100\",\n          children: step === 'select-listing' ? 'Make Trade Offer' : 'Build Your Offer'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 390,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: onClose,\n          className: \"p-2 hover:bg-primary-800/50 rounded-full transition-colors\",\n          children: /*#__PURE__*/_jsxDEV(X, {\n            className: \"w-6 h-6 text-primary-300\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 397,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 393,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 389,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"p-6\",\n        children: step === 'select-listing' ? renderListingSelection() : renderOfferBuilder()\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 402,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 382,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 375,\n    columnNumber: 5\n  }, this);\n}\n_s(TradeOfferModal, \"csUFjoi+pURphCHvD1E2Ftpbl3Q=\", false, function () {\n  return [useApp];\n});\n_c = TradeOfferModal;\nvar _c;\n$RefreshReg$(_c, \"TradeOfferModal\");","map":{"version":3,"names":["React","useState","useMemo","motion","X","Car","DollarSign","Search","Check","ArrowRight","useApp","jsxDEV","_jsxDEV","TradeOfferModal","onClose","selectedListing","_s","_state$currentUser2","_state$currentUser4","state","addTrade","step","setStep","targetListing","setTargetListing","selectedVehicles","setSelectedVehicles","cashAmount","setCashAmount","message","setMessage","searchTerm","setSearchTerm","loading","setLoading","availableVehicles","vehicles","filter","vehicle","_state$currentUser","isListed","isAuctioned","ownerId","currentUser","id","availableListings","allListings","listing","_state$currentUser3","isActive","sellerId","title","toLowerCase","includes","totalOfferValue","vehicleValue","reduce","sum","vId","find","v","customPrice","estimatedValue","handleVehicleToggle","vehicleId","prev","handleSubmitTrade","tradeData","listingId","offererUserId","receiverUserId","status","offererCashAmount","offererVehicleIds","tradeHistory","Date","now","action","userId","timestamp","toISOString","console","log","error","renderListingSelection","className","children","fileName","_jsxFileName","lineNumber","columnNumber","type","placeholder","value","onChange","e","target","length","map","_vehicle$images","seller","users","u","div","whileHover","scale","onClick","images","src","alt","year","make","model","price","toLocaleString","username","renderOfferBuilder","_targetVehicle$images","targetVehicle","targetSeller","_vehicle$images2","whileTap","mileage","Number","disabled","initial","opacity","animate","exit","currentTarget","_c","$RefreshReg$"],"sources":["C:/Users/thato/Downloads/car-app/src/components/trades/TradeOfferModal.tsx"],"sourcesContent":["import React, { useState, useMemo } from 'react';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\nimport { \r\n  X, \r\n  Car, \r\n  DollarSign, \r\n  Plus, \r\n  Minus, \r\n  Search, \r\n  Check,\r\n  MessageCircle,\r\n  ArrowRight,\r\n  AlertCircle\r\n} from 'lucide-react';\r\nimport { useApp } from '../../context/AppContext.tsx';\r\nimport { Listing, Vehicle } from '../../types/index.ts';\r\n\r\ninterface TradeOfferModalProps {\r\n  onClose: () => void;\r\n  selectedListing?: Listing | null;\r\n}\r\n\r\nexport function TradeOfferModal({ onClose, selectedListing }: TradeOfferModalProps) {\r\n  const { state, addTrade } = useApp();\r\n  const [step, setStep] = useState<'select-listing' | 'build-offer'>('select-listing');\r\n  const [targetListing, setTargetListing] = useState<Listing | null>(selectedListing || null);\r\n  const [selectedVehicles, setSelectedVehicles] = useState<string[]>([]);\r\n  const [cashAmount, setCashAmount] = useState<number>(0);\r\n  const [message, setMessage] = useState('');\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  // Available vehicles (user's own vehicles that aren't listed/auctioned)\r\n  const availableVehicles = useMemo(() => {\r\n    return state.vehicles.filter(vehicle => \r\n      !vehicle.isListed && !vehicle.isAuctioned && vehicle.ownerId === state.currentUser?.id\r\n    );\r\n  }, [state.vehicles, state.currentUser?.id]);\r\n\r\n  // Available listings to trade for (exclude user's own listings)\r\n  const availableListings = useMemo(() => {\r\n    return state.allListings.filter(listing => \r\n      listing.isActive && listing.sellerId !== state.currentUser?.id &&\r\n      (!searchTerm || listing.title.toLowerCase().includes(searchTerm.toLowerCase()))\r\n    );\r\n  }, [state.allListings, state.currentUser?.id, searchTerm]);\r\n\r\n  // Calculate total offer value\r\n  const totalOfferValue = useMemo(() => {\r\n    const vehicleValue = selectedVehicles.reduce((sum, vId) => {\r\n      const vehicle = availableVehicles.find(v => v.id === vId);\r\n      return sum + (vehicle?.customPrice || vehicle?.estimatedValue || 0);\r\n    }, 0);\r\n    return vehicleValue + cashAmount;\r\n  }, [selectedVehicles, cashAmount, availableVehicles]);\r\n\r\n  const handleVehicleToggle = (vehicleId: string) => {\r\n    setSelectedVehicles(prev => \r\n      prev.includes(vehicleId) \r\n        ? prev.filter(id => id !== vehicleId)\r\n        : [...prev, vehicleId]\r\n    );\r\n  };\r\n\r\n  const handleSubmitTrade = async () => {\r\n    if (!targetListing) return;\r\n\r\n    setLoading(true);\r\n    try {\r\n      const tradeData = {\r\n        listingId: targetListing.id,\r\n        offererUserId: state.currentUser!.id,\r\n        receiverUserId: targetListing.sellerId,\r\n        status: 'pending' as const,\r\n        offererCashAmount: cashAmount,\r\n        offererVehicleIds: selectedVehicles,\r\n        message,\r\n        tradeHistory: [{\r\n          id: `history_${Date.now()}`,\r\n          action: 'created' as const,\r\n          userId: state.currentUser!.id,\r\n          timestamp: new Date().toISOString(),\r\n          offererCashAmount: cashAmount,\r\n          offererVehicleIds: selectedVehicles,\r\n          message\r\n        }]\r\n      };\r\n\r\n      console.log('🚀 Creating trade with data:', tradeData);\r\n      await addTrade(tradeData);\r\n      console.log('✅ Trade created successfully');\r\n      onClose();\r\n    } catch (error) {\r\n      console.error('❌ Error creating trade:', error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const renderListingSelection = () => (\r\n    <div className=\"space-y-6\">\r\n      <div>\r\n        <h2 className=\"text-2xl font-bold text-primary-100 mb-2\">Select a Listing to Trade For</h2>\r\n        <p className=\"text-primary-300\">Choose which vehicle you'd like to make a trade offer on</p>\r\n      </div>\r\n\r\n      {/* Search */}\r\n      <div className=\"relative\">\r\n        <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-primary-400\" />\r\n        <input\r\n          type=\"text\"\r\n          placeholder=\"Search listings...\"\r\n          value={searchTerm}\r\n          onChange={(e) => setSearchTerm(e.target.value)}\r\n          className=\"input-field pl-10\"\r\n        />\r\n      </div>\r\n\r\n      {/* Listings Grid */}\r\n      <div className=\"max-h-96 overflow-y-auto space-y-3\">\r\n        {availableListings.length === 0 ? (\r\n          <div className=\"text-center py-8\">\r\n            <Car className=\"w-12 h-12 mx-auto mb-4 text-primary-400\" />\r\n            <p className=\"text-primary-300\">No available listings found</p>\r\n          </div>\r\n        ) : (\r\n          availableListings.map((listing) => {\r\n            const vehicle = (listing as any).vehicle || state.vehicles.find(v => v.id === listing.vehicleId);\r\n            const seller = (listing as any).seller || state.users.find(u => u.id === listing.sellerId);\r\n            \r\n            return (\r\n              <motion.div\r\n                key={listing.id}\r\n                whileHover={{ scale: 1.02 }}\r\n                className=\"glass-effect rounded-xl p-4 cursor-pointer hover:bg-primary-800/20 transition-all\"\r\n                onClick={() => {\r\n                  setTargetListing(listing);\r\n                  setStep('build-offer');\r\n                }}\r\n              >\r\n                <div className=\"flex items-center space-x-4\">\r\n                  <div className=\"w-16 h-16 bg-primary-800/30 rounded-lg flex items-center justify-center\">\r\n                    {vehicle?.images?.[0] ? (\r\n                      <img\r\n                        src={vehicle.images[0]}\r\n                        alt={listing.title}\r\n                        className=\"w-full h-full object-cover rounded-lg\"\r\n                      />\r\n                    ) : (\r\n                      <Car className=\"w-8 h-8 text-primary-400\" />\r\n                    )}\r\n                  </div>\r\n                  <div className=\"flex-1\">\r\n                    <h3 className=\"font-semibold text-primary-100\">{listing.title}</h3>\r\n                    <p className=\"text-sm text-primary-300\">\r\n                      {vehicle && `${vehicle.year} ${vehicle.make} ${vehicle.model}`}\r\n                    </p>\r\n                    <div className=\"flex items-center justify-between mt-1\">\r\n                      <span className=\"text-green-400 font-bold\">\r\n                        ${listing.price.toLocaleString()}\r\n                      </span>\r\n                      <span className=\"text-sm text-primary-400\">\r\n                        by @{seller?.username || 'Unknown'}\r\n                      </span>\r\n                    </div>\r\n                  </div>\r\n                  <ArrowRight className=\"w-5 h-5 text-primary-400\" />\r\n                </div>\r\n              </motion.div>\r\n            );\r\n          })\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n\r\n  const renderOfferBuilder = () => {\r\n    const targetVehicle = (targetListing as any)?.vehicle || state.vehicles.find(v => v.id === targetListing?.vehicleId);\r\n    const targetSeller = (targetListing as any)?.seller || state.users.find(u => u.id === targetListing?.sellerId);\r\n\r\n    return (\r\n      <div className=\"space-y-6\">\r\n        <div>\r\n          <button\r\n            onClick={() => setStep('select-listing')}\r\n            className=\"text-blue-400 hover:text-blue-300 text-sm mb-4\"\r\n          >\r\n            ← Back to listing selection\r\n          </button>\r\n          <h2 className=\"text-2xl font-bold text-primary-100 mb-2\">Build Your Trade Offer</h2>\r\n          <p className=\"text-primary-300\">Select vehicles and cash to offer for this listing</p>\r\n        </div>\r\n\r\n        {/* Target Listing Summary */}\r\n        {targetListing && (\r\n          <div className=\"glass-effect rounded-xl p-4 border border-blue-500/30\">\r\n            <div className=\"flex items-center space-x-4\">\r\n              <div className=\"w-16 h-16 bg-primary-800/30 rounded-lg flex items-center justify-center\">\r\n                {targetVehicle?.images?.[0] ? (\r\n                  <img\r\n                    src={targetVehicle.images[0]}\r\n                    alt={targetListing.title}\r\n                    className=\"w-full h-full object-cover rounded-lg\"\r\n                  />\r\n                ) : (\r\n                  <Car className=\"w-8 h-8 text-primary-400\" />\r\n                )}\r\n              </div>\r\n              <div className=\"flex-1\">\r\n                <h3 className=\"font-semibold text-primary-100\">{targetListing.title}</h3>\r\n                <p className=\"text-sm text-primary-300\">\r\n                  {targetVehicle && `${targetVehicle.year} ${targetVehicle.make} ${targetVehicle.model}`}\r\n                </p>\r\n                <div className=\"flex items-center justify-between mt-1\">\r\n                  <span className=\"text-green-400 font-bold\">\r\n                    ${targetListing.price.toLocaleString()}\r\n                  </span>\r\n                  <span className=\"text-sm text-primary-400\">\r\n                    by @{targetSeller?.username || 'Unknown'}\r\n                  </span>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* Your Vehicles */}\r\n        <div>\r\n          <h3 className=\"text-lg font-semibold text-primary-100 mb-4\">Your Vehicles</h3>\r\n          {availableVehicles.length === 0 ? (\r\n            <div className=\"glass-effect rounded-xl p-6 text-center\">\r\n              <Car className=\"w-12 h-12 mx-auto mb-4 text-primary-400\" />\r\n              <p className=\"text-primary-300\">No available vehicles to trade</p>\r\n              <p className=\"text-sm text-primary-400 mt-1\">\r\n                You can only trade vehicles that aren't currently listed or in auction\r\n              </p>\r\n            </div>\r\n          ) : (\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n              {availableVehicles.map((vehicle) => (\r\n                <motion.div\r\n                  key={vehicle.id}\r\n                  whileTap={{ scale: 0.98 }}\r\n                  className={`glass-effect rounded-xl p-4 cursor-pointer transition-all ${\r\n                    selectedVehicles.includes(vehicle.id)\r\n                      ? 'border-2 border-blue-500 bg-blue-500/10'\r\n                      : 'border border-primary-700/30 hover:border-primary-600/50'\r\n                  }`}\r\n                  onClick={() => handleVehicleToggle(vehicle.id)}\r\n                >\r\n                  <div className=\"flex items-center space-x-4\">\r\n                    <div className=\"w-12 h-12 bg-primary-800/30 rounded-lg flex items-center justify-center relative\">\r\n                      {vehicle.images?.[0] ? (\r\n                        <img\r\n                          src={vehicle.images[0]}\r\n                          alt={`${vehicle.year} ${vehicle.make} ${vehicle.model}`}\r\n                          className=\"w-full h-full object-cover rounded-lg\"\r\n                        />\r\n                      ) : (\r\n                        <Car className=\"w-6 h-6 text-primary-400\" />\r\n                      )}\r\n                      {selectedVehicles.includes(vehicle.id) && (\r\n                        <div className=\"absolute -top-2 -right-2 w-6 h-6 bg-blue-500 rounded-full flex items-center justify-center\">\r\n                          <Check className=\"w-4 h-4 text-white\" />\r\n                        </div>\r\n                      )}\r\n                    </div>\r\n                    <div className=\"flex-1\">\r\n                      <h4 className=\"font-medium text-primary-100\">\r\n                        {vehicle.year} {vehicle.make} {vehicle.model}\r\n                      </h4>\r\n                      <p className=\"text-sm text-primary-300\">\r\n                        {vehicle.mileage.toLocaleString()} mi\r\n                      </p>\r\n                      <p className=\"text-green-400 font-medium\">\r\n                        ${(vehicle.customPrice || vehicle.estimatedValue).toLocaleString()}\r\n                      </p>\r\n                    </div>\r\n                  </div>\r\n                </motion.div>\r\n              ))}\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        {/* Cash Amount */}\r\n        <div>\r\n          <h3 className=\"text-lg font-semibold text-primary-100 mb-4\">Cash Amount</h3>\r\n          <div className=\"glass-effect rounded-xl p-4\">\r\n            <div className=\"flex items-center space-x-4\">\r\n              <DollarSign className=\"w-6 h-6 text-green-400\" />\r\n              <div className=\"flex-1\">\r\n                <input\r\n                  type=\"number\"\r\n                  value={cashAmount === 0 ? '' : cashAmount}\r\n                  onChange={(e) => setCashAmount(Number(e.target.value) || 0)}\r\n                  placeholder=\"0\"\r\n                  className=\"input-field text-lg font-bold\"\r\n                />\r\n                <p className=\"text-sm text-primary-400 mt-1\">\r\n                  {cashAmount > 0 \r\n                    ? \"You're offering cash in addition to vehicles\"\r\n                    : cashAmount < 0 \r\n                    ? \"You're requesting cash back from the seller\"\r\n                    : \"No cash involved in this trade\"\r\n                  }\r\n                </p>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Message */}\r\n        <div>\r\n          <h3 className=\"text-lg font-semibold text-primary-100 mb-4\">Message (Optional)</h3>\r\n          <textarea\r\n            value={message}\r\n            onChange={(e) => setMessage(e.target.value)}\r\n            placeholder=\"Add a personal message to your trade offer...\"\r\n            className=\"input-field h-24 resize-none\"\r\n          />\r\n        </div>\r\n\r\n        {/* Offer Summary */}\r\n        <div className=\"glass-effect rounded-xl p-4 border border-green-500/30\">\r\n          <h3 className=\"text-lg font-semibold text-primary-100 mb-4\">Trade Summary</h3>\r\n          <div className=\"space-y-2\">\r\n            <div className=\"flex justify-between\">\r\n              <span className=\"text-primary-300\">Vehicles ({selectedVehicles.length}):</span>\r\n              <span className=\"text-primary-100 font-medium\">\r\n                ${selectedVehicles.reduce((sum, vId) => {\r\n                  const vehicle = availableVehicles.find(v => v.id === vId);\r\n                  return sum + (vehicle?.customPrice || vehicle?.estimatedValue || 0);\r\n                }, 0).toLocaleString()}\r\n              </span>\r\n            </div>\r\n            <div className=\"flex justify-between\">\r\n              <span className=\"text-primary-300\">Cash:</span>\r\n              <span className={`font-medium ${cashAmount >= 0 ? 'text-green-400' : 'text-red-400'}`}>\r\n                {cashAmount >= 0 ? '+' : ''}${cashAmount.toLocaleString()}\r\n              </span>\r\n            </div>\r\n            <div className=\"border-t border-primary-700/30 pt-2\">\r\n              <div className=\"flex justify-between\">\r\n                <span className=\"text-primary-100 font-semibold\">Total Offer Value:</span>\r\n                <span className=\"text-green-400 font-bold text-lg\">\r\n                  ${totalOfferValue.toLocaleString()}\r\n                </span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Submit Button */}\r\n        <div className=\"flex space-x-4\">\r\n          <button\r\n            onClick={onClose}\r\n            className=\"btn-secondary flex-1\"\r\n          >\r\n            Cancel\r\n          </button>\r\n          <button\r\n            onClick={handleSubmitTrade}\r\n            disabled={loading || (selectedVehicles.length === 0 && cashAmount === 0)}\r\n            className=\"btn-primary flex-1\"\r\n          >\r\n            {loading ? 'Sending...' : 'Send Trade Offer'}\r\n          </button>\r\n        </div>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <motion.div\r\n      initial={{ opacity: 0 }}\r\n      animate={{ opacity: 1 }}\r\n      exit={{ opacity: 0 }}\r\n      className=\"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50\"\r\n      onClick={(e) => e.target === e.currentTarget && onClose()}\r\n    >\r\n      <motion.div\r\n        initial={{ scale: 0.9, opacity: 0 }}\r\n        animate={{ scale: 1, opacity: 1 }}\r\n        exit={{ scale: 0.9, opacity: 0 }}\r\n        className=\"glass-effect rounded-2xl w-full max-w-4xl max-h-[90vh] overflow-y-auto\"\r\n      >\r\n        {/* Header */}\r\n        <div className=\"flex items-center justify-between p-6 border-b border-primary-700/30\">\r\n          <h1 className=\"text-2xl font-bold text-primary-100\">\r\n            {step === 'select-listing' ? 'Make Trade Offer' : 'Build Your Offer'}\r\n          </h1>\r\n          <button\r\n            onClick={onClose}\r\n            className=\"p-2 hover:bg-primary-800/50 rounded-full transition-colors\"\r\n          >\r\n            <X className=\"w-6 h-6 text-primary-300\" />\r\n          </button>\r\n        </div>\r\n\r\n        {/* Content */}\r\n        <div className=\"p-6\">\r\n          {step === 'select-listing' ? renderListingSelection() : renderOfferBuilder()}\r\n        </div>\r\n      </motion.div>\r\n    </motion.div>\r\n  );\r\n} "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
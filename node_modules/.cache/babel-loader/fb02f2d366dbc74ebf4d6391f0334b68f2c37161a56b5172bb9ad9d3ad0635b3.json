{"ast":null,"code":"const STORAGE_KEY = 'carTrade_auth';\nconst USERS_KEY = 'carTrade_users';\nexport class AuthService {\n  static getCurrentUser() {\n    try {\n      const stored = localStorage.getItem(STORAGE_KEY);\n      return stored ? JSON.parse(stored) : null;\n    } catch {\n      return null;\n    }\n  }\n  static getUsers() {\n    try {\n      const stored = localStorage.getItem(USERS_KEY);\n      return stored ? JSON.parse(stored) : [];\n    } catch {\n      return [];\n    }\n  }\n  static saveUsers(users) {\n    localStorage.setItem(USERS_KEY, JSON.stringify(users));\n  }\n  static async login(username, password) {\n    try {\n      const users = this.getUsers();\n      const user = users.find(u => u.username === username && u.password === password);\n      if (user) {\n        localStorage.setItem(STORAGE_KEY, JSON.stringify(user));\n        return {\n          success: true,\n          user\n        };\n      } else {\n        return {\n          success: false,\n          error: 'Invalid username or password'\n        };\n      }\n    } catch (error) {\n      return {\n        success: false,\n        error: 'Login failed'\n      };\n    }\n  }\n  static async register(userData) {\n    try {\n      const users = this.getUsers();\n\n      // Check if username already exists\n      if (users.some(u => u.username === userData.username)) {\n        return {\n          success: false,\n          error: 'Username already exists'\n        };\n      }\n\n      // Check if email already exists\n      if (users.some(u => u.email === userData.email)) {\n        return {\n          success: false,\n          error: 'Email already exists'\n        };\n      }\n      const newUser = {\n        ...userData,\n        id: Date.now().toString() + Math.random().toString(36).substr(2, 9),\n        createdAt: new Date().toISOString()\n      };\n      users.push(newUser);\n      this.saveUsers(users);\n      localStorage.setItem(STORAGE_KEY, JSON.stringify(newUser));\n      return {\n        success: true,\n        user: newUser\n      };\n    } catch (error) {\n      return {\n        success: false,\n        error: 'Registration failed'\n      };\n    }\n  }\n  static logout() {\n    localStorage.removeItem(STORAGE_KEY);\n  }\n  static isAuthenticated() {\n    return this.getCurrentUser() !== null;\n  }\n  static updateUser(updatedUser) {\n    localStorage.setItem(STORAGE_KEY, JSON.stringify(updatedUser));\n    const users = this.getUsers();\n    const userIndex = users.findIndex(u => u.id === updatedUser.id);\n    if (userIndex !== -1) {\n      users[userIndex] = updatedUser;\n      this.saveUsers(users);\n    }\n  }\n}","map":{"version":3,"names":["STORAGE_KEY","USERS_KEY","AuthService","getCurrentUser","stored","localStorage","getItem","JSON","parse","getUsers","saveUsers","users","setItem","stringify","login","username","password","user","find","u","success","error","register","userData","some","email","newUser","id","Date","now","toString","Math","random","substr","createdAt","toISOString","push","logout","removeItem","isAuthenticated","updateUser","updatedUser","userIndex","findIndex"],"sources":["C:/Users/thato/Downloads/car-app/src/services/authService.ts"],"sourcesContent":["import { User } from '../types/index.ts';\r\n\r\nconst STORAGE_KEY = 'carTrade_auth';\r\nconst USERS_KEY = 'carTrade_users';\r\n\r\nexport class AuthService {\r\n  static getCurrentUser(): User | null {\r\n    try {\r\n      const stored = localStorage.getItem(STORAGE_KEY);\r\n      return stored ? JSON.parse(stored) : null;\r\n    } catch {\r\n      return null;\r\n    }\r\n  }\r\n\r\n  static getUsers(): User[] {\r\n    try {\r\n      const stored = localStorage.getItem(USERS_KEY);\r\n      return stored ? JSON.parse(stored) : [];\r\n    } catch {\r\n      return [];\r\n    }\r\n  }\r\n\r\n  static saveUsers(users: User[]): void {\r\n    localStorage.setItem(USERS_KEY, JSON.stringify(users));\r\n  }\r\n\r\n  static async login(username: string, password: string): Promise<{ success: boolean; user?: User; error?: string }> {\r\n    try {\r\n      const users = this.getUsers();\r\n      const user = users.find(u => u.username === username && u.password === password);\r\n      \r\n      if (user) {\r\n        localStorage.setItem(STORAGE_KEY, JSON.stringify(user));\r\n        return { success: true, user };\r\n      } else {\r\n        return { success: false, error: 'Invalid username or password' };\r\n      }\r\n    } catch (error) {\r\n      return { success: false, error: 'Login failed' };\r\n    }\r\n  }\r\n\r\n  static async register(userData: Omit<User, 'id' | 'createdAt'>): Promise<{ success: boolean; user?: User; error?: string }> {\r\n    try {\r\n      const users = this.getUsers();\r\n      \r\n      // Check if username already exists\r\n      if (users.some(u => u.username === userData.username)) {\r\n        return { success: false, error: 'Username already exists' };\r\n      }\r\n\r\n      // Check if email already exists\r\n      if (users.some(u => u.email === userData.email)) {\r\n        return { success: false, error: 'Email already exists' };\r\n      }\r\n\r\n      const newUser: User = {\r\n        ...userData,\r\n        id: Date.now().toString() + Math.random().toString(36).substr(2, 9),\r\n        createdAt: new Date().toISOString(),\r\n      };\r\n\r\n      users.push(newUser);\r\n      this.saveUsers(users);\r\n      localStorage.setItem(STORAGE_KEY, JSON.stringify(newUser));\r\n      \r\n      return { success: true, user: newUser };\r\n    } catch (error) {\r\n      return { success: false, error: 'Registration failed' };\r\n    }\r\n  }\r\n\r\n  static logout(): void {\r\n    localStorage.removeItem(STORAGE_KEY);\r\n  }\r\n\r\n  static isAuthenticated(): boolean {\r\n    return this.getCurrentUser() !== null;\r\n  }\r\n\r\n  static updateUser(updatedUser: User): void {\r\n    localStorage.setItem(STORAGE_KEY, JSON.stringify(updatedUser));\r\n    \r\n    const users = this.getUsers();\r\n    const userIndex = users.findIndex(u => u.id === updatedUser.id);\r\n    if (userIndex !== -1) {\r\n      users[userIndex] = updatedUser;\r\n      this.saveUsers(users);\r\n    }\r\n  }\r\n} "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
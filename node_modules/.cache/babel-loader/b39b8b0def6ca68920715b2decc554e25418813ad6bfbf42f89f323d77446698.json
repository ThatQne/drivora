{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\thato\\\\Downloads\\\\car-app\\\\src\\\\components\\\\messages\\\\MessagesView.tsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef, useMemo } from 'react';\nimport { motion } from 'framer-motion';\nimport { MessageCircle, Search, Send, User, ArrowLeft, Check, CheckCheck, Phone, Video, Info } from 'lucide-react';\nimport { useApp } from '../../context/AppContext.tsx';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport function MessagesView() {\n  _s();\n  var _state$currentUser5, _state$currentUser7, _state$currentUser9;\n  const {\n    state,\n    sendMessage,\n    markMessagesAsRead,\n    loadUserMessages\n  } = useApp();\n  const [selectedConversation, setSelectedConversation] = useState(null);\n  const [messageText, setMessageText] = useState('');\n  const [searchTerm, setSearchTerm] = useState('');\n  const [loading, setLoading] = useState(false);\n  const [typingUsers, setTypingUsers] = useState([]);\n  const [isTyping, setIsTyping] = useState(false);\n  const messagesEndRef = useRef(null);\n  const typingTimeoutRef = useRef();\n\n  // Load messages on component mount\n  useEffect(() => {\n    loadUserMessages();\n  }, [loadUserMessages]);\n\n  // Auto-scroll to bottom when new messages arrive\n  useEffect(() => {\n    scrollToBottom();\n  }, [state.messages, selectedConversation]);\n\n  // Clean up typing indicators that are too old\n  useEffect(() => {\n    const interval = setInterval(() => {\n      const now = Date.now();\n      setTypingUsers(prev => prev.filter(typing => now - typing.timestamp < 3000));\n    }, 1000);\n    return () => clearInterval(interval);\n  }, []);\n  const scrollToBottom = () => {\n    var _messagesEndRef$curre;\n    (_messagesEndRef$curre = messagesEndRef.current) === null || _messagesEndRef$curre === void 0 ? void 0 : _messagesEndRef$curre.scrollIntoView({\n      behavior: 'smooth'\n    });\n  };\n\n  // Create conversations from messages\n  const conversations = useMemo(() => {\n    const convMap = new Map();\n    state.messages.forEach(message => {\n      var _state$currentUser, _state$currentUser2;\n      const otherUserId = message.senderId === ((_state$currentUser = state.currentUser) === null || _state$currentUser === void 0 ? void 0 : _state$currentUser.id) ? message.receiverId : message.senderId;\n      const conversationId = [(_state$currentUser2 = state.currentUser) === null || _state$currentUser2 === void 0 ? void 0 : _state$currentUser2.id, otherUserId].sort().join('-');\n      if (!convMap.has(conversationId)) {\n        var _state$currentUser3;\n        convMap.set(conversationId, {\n          id: conversationId,\n          participants: [(_state$currentUser3 = state.currentUser) === null || _state$currentUser3 === void 0 ? void 0 : _state$currentUser3.id, otherUserId],\n          lastMessage: message,\n          unreadCount: 0,\n          updatedAt: message.timestamp\n        });\n      } else {\n        const existing = convMap.get(conversationId);\n        if (new Date(message.timestamp) > new Date(existing.lastMessage.timestamp)) {\n          existing.lastMessage = message;\n          existing.updatedAt = message.timestamp;\n        }\n      }\n    });\n\n    // Calculate unread counts\n    convMap.forEach(conversation => {\n      const unreadMessages = state.messages.filter(msg => {\n        var _state$currentUser4;\n        return msg.receiverId === ((_state$currentUser4 = state.currentUser) === null || _state$currentUser4 === void 0 ? void 0 : _state$currentUser4.id) && !msg.read && (msg.senderId === conversation.participants[0] || msg.senderId === conversation.participants[1]);\n      });\n      conversation.unreadCount = unreadMessages.length;\n    });\n    return Array.from(convMap.values()).sort((a, b) => new Date(b.updatedAt).getTime() - new Date(a.updatedAt).getTime());\n  }, [state.messages, (_state$currentUser5 = state.currentUser) === null || _state$currentUser5 === void 0 ? void 0 : _state$currentUser5.id, state.users]);\n\n  // Filter conversations based on search\n  const filteredConversations = useMemo(() => {\n    if (!searchTerm) return conversations;\n    return conversations.filter(conversation => {\n      const otherUserId = conversation.participants.find(p => {\n        var _state$currentUser6;\n        return p !== ((_state$currentUser6 = state.currentUser) === null || _state$currentUser6 === void 0 ? void 0 : _state$currentUser6.id);\n      });\n      const otherUser = state.users.find(u => u.id === otherUserId);\n      return otherUser === null || otherUser === void 0 ? void 0 : otherUser.username.toLowerCase().includes(searchTerm.toLowerCase());\n    });\n  }, [conversations, searchTerm, state.users, (_state$currentUser7 = state.currentUser) === null || _state$currentUser7 === void 0 ? void 0 : _state$currentUser7.id]);\n\n  // Get messages for selected conversation\n  const conversationMessages = useMemo(() => {\n    if (!selectedConversation) return [];\n    const conversation = conversations.find(c => c.id === selectedConversation);\n    if (!conversation) return [];\n    return state.messages.filter(msg => {\n      const participants = conversation.participants;\n      return msg.senderId === participants[0] && msg.receiverId === participants[1] || msg.senderId === participants[1] && msg.receiverId === participants[0];\n    }).sort((a, b) => new Date(a.timestamp).getTime() - new Date(b.timestamp).getTime());\n  }, [selectedConversation, conversations, state.messages]);\n\n  // Get other user in selected conversation\n  const selectedConversationUser = useMemo(() => {\n    if (!selectedConversation) return null;\n    const conversation = conversations.find(c => c.id === selectedConversation);\n    if (!conversation) return null;\n    const otherUserId = conversation.participants.find(p => {\n      var _state$currentUser8;\n      return p !== ((_state$currentUser8 = state.currentUser) === null || _state$currentUser8 === void 0 ? void 0 : _state$currentUser8.id);\n    });\n    return state.users.find(u => u.id === otherUserId) || null;\n  }, [selectedConversation, conversations, state.users, (_state$currentUser9 = state.currentUser) === null || _state$currentUser9 === void 0 ? void 0 : _state$currentUser9.id]);\n  const handleSendMessage = async () => {\n    if (!messageText.trim() || !selectedConversationUser || loading) return;\n    setLoading(true);\n    try {\n      await sendMessage({\n        senderId: state.currentUser.id,\n        receiverId: selectedConversationUser.id,\n        content: messageText.trim()\n      });\n      setMessageText('');\n      setIsTyping(false);\n    } catch (error) {\n      console.error('Error sending message:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n  const handleKeyPress = e => {\n    if (e.key === 'Enter' && !e.shiftKey) {\n      e.preventDefault();\n      handleSendMessage();\n    }\n  };\n  const handleTyping = value => {\n    setMessageText(value);\n    if (value.trim() && !isTyping) {\n      setIsTyping(true);\n      // In a real app, you'd emit typing indicator to other users via WebSocket\n    }\n\n    // Clear typing indicator after 2 seconds of no typing\n    if (typingTimeoutRef.current) {\n      clearTimeout(typingTimeoutRef.current);\n    }\n    typingTimeoutRef.current = setTimeout(() => {\n      setIsTyping(false);\n    }, 2000);\n  };\n  const handleConversationSelect = async conversationId => {\n    setSelectedConversation(conversationId);\n\n    // Mark messages as read\n    const conversation = conversations.find(c => c.id === conversationId);\n    if (conversation && conversation.unreadCount > 0) {\n      try {\n        await markMessagesAsRead(conversationId);\n      } catch (error) {\n        console.error('Error marking messages as read:', error);\n      }\n    }\n  };\n  const formatTime = timestamp => {\n    const date = new Date(timestamp);\n    const now = new Date();\n    const diffInHours = (now.getTime() - date.getTime()) / (1000 * 60 * 60);\n    if (diffInHours < 24) {\n      return date.toLocaleTimeString([], {\n        hour: '2-digit',\n        minute: '2-digit'\n      });\n    } else if (diffInHours < 168) {\n      // 7 days\n      return date.toLocaleDateString([], {\n        weekday: 'short'\n      });\n    } else {\n      return date.toLocaleDateString([], {\n        month: 'short',\n        day: 'numeric'\n      });\n    }\n  };\n  const formatMessageTime = timestamp => {\n    return new Date(timestamp).toLocaleTimeString([], {\n      hour: '2-digit',\n      minute: '2-digit'\n    });\n  };\n  const renderConversationsList = () => /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"w-full lg:w-96 border-r border-primary-700/30 flex flex-col\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"p-4 border-b border-primary-700/30\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"text-xl font-bold text-primary-100 mb-4\",\n        children: \"Messages\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 226,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"relative\",\n        children: [/*#__PURE__*/_jsxDEV(Search, {\n          className: \"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-primary-400\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 230,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          placeholder: \"Search conversations...\",\n          value: searchTerm,\n          onChange: e => setSearchTerm(e.target.value),\n          className: \"input-field pl-10 text-sm\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 231,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 229,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 225,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex-1 overflow-y-auto\",\n      children: filteredConversations.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"p-4 text-center\",\n        children: [/*#__PURE__*/_jsxDEV(MessageCircle, {\n          className: \"w-12 h-12 mx-auto mb-4 text-primary-400\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 245,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-primary-300\",\n          children: \"No conversations yet\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 246,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-sm text-primary-400 mt-1\",\n          children: \"Start trading to begin messaging with other users\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 247,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 244,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"space-y-1 p-2\",\n        children: filteredConversations.map(conversation => {\n          var _state$currentUser1;\n          const otherUserId = conversation.participants.find(p => {\n            var _state$currentUser0;\n            return p !== ((_state$currentUser0 = state.currentUser) === null || _state$currentUser0 === void 0 ? void 0 : _state$currentUser0.id);\n          });\n          const otherUser = state.users.find(u => u.id === otherUserId);\n          const isSelected = selectedConversation === conversation.id;\n          return /*#__PURE__*/_jsxDEV(motion.div, {\n            whileHover: {\n              scale: 1.02\n            },\n            whileTap: {\n              scale: 0.98\n            },\n            onClick: () => handleConversationSelect(conversation.id),\n            className: `p-3 rounded-lg cursor-pointer transition-all ${isSelected ? 'bg-primary-600/30 border border-primary-500/50' : 'hover:bg-primary-800/30'}`,\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center space-x-3\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"relative\",\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"w-12 h-12 bg-primary-800/50 rounded-full flex items-center justify-center\",\n                  children: otherUser !== null && otherUser !== void 0 && otherUser.avatar ? /*#__PURE__*/_jsxDEV(\"img\", {\n                    src: otherUser.avatar,\n                    alt: otherUser.username,\n                    className: \"w-full h-full object-cover rounded-full\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 275,\n                    columnNumber: 27\n                  }, this) : /*#__PURE__*/_jsxDEV(User, {\n                    className: \"w-6 h-6 text-primary-300\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 281,\n                    columnNumber: 27\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 273,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 272,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex-1 min-w-0\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex items-center justify-between\",\n                  children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                    className: \"font-medium text-primary-100 truncate\",\n                    children: [\"@\", (otherUser === null || otherUser === void 0 ? void 0 : otherUser.username) || 'Unknown']\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 290,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"text-xs text-primary-400\",\n                    children: formatTime(conversation.lastMessage.timestamp)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 293,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 289,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex items-center justify-between mt-1\",\n                  children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"text-sm text-primary-300 truncate\",\n                    children: [conversation.lastMessage.senderId === ((_state$currentUser1 = state.currentUser) === null || _state$currentUser1 === void 0 ? void 0 : _state$currentUser1.id) && 'You: ', conversation.lastMessage.content]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 299,\n                    columnNumber: 25\n                  }, this), conversation.unreadCount > 0 && /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"bg-blue-500 text-white text-xs px-2 py-1 rounded-full min-w-[20px] text-center\",\n                    children: conversation.unreadCount > 99 ? '99+' : conversation.unreadCount\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 304,\n                    columnNumber: 27\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 298,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 288,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 270,\n              columnNumber: 19\n            }, this)\n          }, conversation.id, false, {\n            fileName: _jsxFileName,\n            lineNumber: 259,\n            columnNumber: 17\n          }, this);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 252,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 242,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 223,\n    columnNumber: 5\n  }, this);\n  const renderChatInterface = () => {\n    if (!selectedConversation || !selectedConversationUser) {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex-1 flex items-center justify-center\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-center\",\n          children: [/*#__PURE__*/_jsxDEV(MessageCircle, {\n            className: \"w-16 h-16 mx-auto mb-4 text-primary-400\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 325,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"text-xl font-semibold text-primary-100 mb-2\",\n            children: \"Select a conversation\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 326,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-primary-300\",\n            children: \"Choose a conversation to start messaging\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 327,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 324,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 323,\n        columnNumber: 9\n      }, this);\n    }\n    const typingUsersInConversation = typingUsers.filter(t => t.conversationId === selectedConversation);\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex-1 flex flex-col\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"p-4 border-b border-primary-700/30 flex items-center justify-between\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center space-x-3\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => setSelectedConversation(null),\n            className: \"lg:hidden p-2 hover:bg-primary-800/50 rounded-full transition-colors\",\n            children: /*#__PURE__*/_jsxDEV(ArrowLeft, {\n              className: \"w-5 h-5 text-primary-300\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 344,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 340,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"w-10 h-10 bg-primary-800/50 rounded-full flex items-center justify-center\",\n            children: selectedConversationUser.avatar ? /*#__PURE__*/_jsxDEV(\"img\", {\n              src: selectedConversationUser.avatar,\n              alt: selectedConversationUser.username,\n              className: \"w-full h-full object-cover rounded-full\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 349,\n              columnNumber: 17\n            }, this) : /*#__PURE__*/_jsxDEV(User, {\n              className: \"w-5 h-5 text-primary-300\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 355,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 347,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              className: \"font-semibold text-primary-100\",\n              children: [\"@\", selectedConversationUser.username]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 360,\n              columnNumber: 15\n            }, this), typingUsersInConversation.length > 0 && /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-sm text-blue-400\",\n              children: \"typing...\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 364,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 359,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 339,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center space-x-2\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"p-2 hover:bg-primary-800/50 rounded-full transition-colors\",\n            children: /*#__PURE__*/_jsxDEV(Phone, {\n              className: \"w-5 h-5 text-primary-300\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 371,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 370,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"p-2 hover:bg-primary-800/50 rounded-full transition-colors\",\n            children: /*#__PURE__*/_jsxDEV(Video, {\n              className: \"w-5 h-5 text-primary-300\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 374,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 373,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"p-2 hover:bg-primary-800/50 rounded-full transition-colors\",\n            children: /*#__PURE__*/_jsxDEV(Info, {\n              className: \"w-5 h-5 text-primary-300\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 377,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 376,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 369,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 338,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex-1 overflow-y-auto p-4 space-y-4\",\n        children: [conversationMessages.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-center py-8\",\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-primary-300\",\n            children: \"No messages yet\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 386,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-sm text-primary-400 mt-1\",\n            children: \"Send a message to start the conversation\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 387,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 385,\n          columnNumber: 13\n        }, this) : conversationMessages.map((message, index) => {\n          var _state$currentUser10;\n          const isOwn = message.senderId === ((_state$currentUser10 = state.currentUser) === null || _state$currentUser10 === void 0 ? void 0 : _state$currentUser10.id);\n          const showAvatar = index === 0 || conversationMessages[index - 1].senderId !== message.senderId;\n          const isLastInGroup = index === conversationMessages.length - 1 || conversationMessages[index + 1].senderId !== message.senderId;\n          return /*#__PURE__*/_jsxDEV(motion.div, {\n            initial: {\n              opacity: 0,\n              y: 20\n            },\n            animate: {\n              opacity: 1,\n              y: 0\n            },\n            className: `flex ${isOwn ? 'justify-end' : 'justify-start'}`,\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: `flex items-end space-x-2 max-w-xs lg:max-w-md ${isOwn ? 'flex-row-reverse space-x-reverse' : ''}`,\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"w-8 h-8 flex-shrink-0\",\n                children: showAvatar && !isOwn && /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"w-8 h-8 bg-primary-800/50 rounded-full flex items-center justify-center\",\n                  children: selectedConversationUser.avatar ? /*#__PURE__*/_jsxDEV(\"img\", {\n                    src: selectedConversationUser.avatar,\n                    alt: selectedConversationUser.username,\n                    className: \"w-full h-full object-cover rounded-full\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 410,\n                    columnNumber: 29\n                  }, this) : /*#__PURE__*/_jsxDEV(User, {\n                    className: \"w-4 h-4 text-primary-300\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 416,\n                    columnNumber: 29\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 408,\n                  columnNumber: 25\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 406,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: `px-4 py-2 rounded-2xl ${isOwn ? 'bg-blue-600 text-white' : 'bg-primary-700/50 text-primary-100'} ${isLastInGroup ? '' : 'mb-1'}`,\n                children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"text-sm whitespace-pre-wrap\",\n                  children: message.content\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 432,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: `flex items-center justify-end mt-1 space-x-1 ${isOwn ? 'text-blue-200' : 'text-primary-400'}`,\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"text-xs\",\n                    children: formatMessageTime(message.timestamp)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 438,\n                    columnNumber: 25\n                  }, this), isOwn && /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"flex items-center\",\n                    children: message.read ? /*#__PURE__*/_jsxDEV(CheckCheck, {\n                      className: \"w-3 h-3\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 444,\n                      columnNumber: 31\n                    }, this) : /*#__PURE__*/_jsxDEV(Check, {\n                      className: \"w-3 h-3\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 446,\n                      columnNumber: 31\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 442,\n                    columnNumber: 27\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 435,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 423,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 404,\n              columnNumber: 19\n            }, this)\n          }, message.id, false, {\n            fileName: _jsxFileName,\n            lineNumber: 398,\n            columnNumber: 17\n          }, this);\n        }), typingUsersInConversation.length > 0 && /*#__PURE__*/_jsxDEV(motion.div, {\n          initial: {\n            opacity: 0,\n            y: 10\n          },\n          animate: {\n            opacity: 1,\n            y: 0\n          },\n          className: \"flex items-end space-x-2\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"w-8 h-8 bg-primary-800/50 rounded-full flex items-center justify-center\",\n            children: /*#__PURE__*/_jsxDEV(User, {\n              className: \"w-4 h-4 text-primary-300\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 466,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 465,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"bg-primary-700/50 px-4 py-2 rounded-2xl\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex space-x-1\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"w-2 h-2 bg-primary-400 rounded-full animate-bounce\",\n                style: {\n                  animationDelay: '0ms'\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 470,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"w-2 h-2 bg-primary-400 rounded-full animate-bounce\",\n                style: {\n                  animationDelay: '150ms'\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 471,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"w-2 h-2 bg-primary-400 rounded-full animate-bounce\",\n                style: {\n                  animationDelay: '300ms'\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 472,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 469,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 468,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 460,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          ref: messagesEndRef\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 478,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 383,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"p-4 border-t border-primary-700/30\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-end space-x-3\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex-1\",\n            children: /*#__PURE__*/_jsxDEV(\"textarea\", {\n              value: messageText,\n              onChange: e => handleTyping(e.target.value),\n              onKeyPress: handleKeyPress,\n              placeholder: \"Type a message...\",\n              className: \"input-field resize-none h-10 max-h-32\",\n              rows: 1,\n              disabled: loading\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 485,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 484,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: handleSendMessage,\n            disabled: !messageText.trim() || loading,\n            className: `p-3 rounded-full transition-all ${messageText.trim() && !loading ? 'bg-blue-600 hover:bg-blue-700 text-white' : 'bg-primary-700/50 text-primary-400 cursor-not-allowed'}`,\n            children: /*#__PURE__*/_jsxDEV(Send, {\n              className: \"w-5 h-5\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 504,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 495,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 483,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 482,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 336,\n      columnNumber: 7\n    }, this);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"h-full flex\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"lg:hidden w-full\",\n      children: selectedConversation ? renderChatInterface() : renderConversationsList()\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 515,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"hidden lg:flex w-full\",\n      children: [renderConversationsList(), renderChatInterface()]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 520,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 513,\n    columnNumber: 5\n  }, this);\n}\n_s(MessagesView, \"gA4DZOw5Qm5/eYQOQOHOUJ2hEBI=\", false, function () {\n  return [useApp];\n});\n_c = MessagesView;\nvar _c;\n$RefreshReg$(_c, \"MessagesView\");","map":{"version":3,"names":["React","useState","useEffect","useRef","useMemo","motion","MessageCircle","Search","Send","User","ArrowLeft","Check","CheckCheck","Phone","Video","Info","useApp","jsxDEV","_jsxDEV","MessagesView","_s","_state$currentUser5","_state$currentUser7","_state$currentUser9","state","sendMessage","markMessagesAsRead","loadUserMessages","selectedConversation","setSelectedConversation","messageText","setMessageText","searchTerm","setSearchTerm","loading","setLoading","typingUsers","setTypingUsers","isTyping","setIsTyping","messagesEndRef","typingTimeoutRef","scrollToBottom","messages","interval","setInterval","now","Date","prev","filter","typing","timestamp","clearInterval","_messagesEndRef$curre","current","scrollIntoView","behavior","conversations","convMap","Map","forEach","message","_state$currentUser","_state$currentUser2","otherUserId","senderId","currentUser","id","receiverId","conversationId","sort","join","has","_state$currentUser3","set","participants","lastMessage","unreadCount","updatedAt","existing","get","conversation","unreadMessages","msg","_state$currentUser4","read","length","Array","from","values","a","b","getTime","users","filteredConversations","find","p","_state$currentUser6","otherUser","u","username","toLowerCase","includes","conversationMessages","c","selectedConversationUser","_state$currentUser8","handleSendMessage","trim","content","error","console","handleKeyPress","e","key","shiftKey","preventDefault","handleTyping","value","clearTimeout","setTimeout","handleConversationSelect","formatTime","date","diffInHours","toLocaleTimeString","hour","minute","toLocaleDateString","weekday","month","day","formatMessageTime","renderConversationsList","className","children","fileName","_jsxFileName","lineNumber","columnNumber","type","placeholder","onChange","target","map","_state$currentUser1","_state$currentUser0","isSelected","div","whileHover","scale","whileTap","onClick","avatar","src","alt","renderChatInterface","typingUsersInConversation","t","index","_state$currentUser10","isOwn","showAvatar","isLastInGroup","initial","opacity","y","animate","style","animationDelay","ref","onKeyPress","rows","disabled","_c","$RefreshReg$"],"sources":["C:/Users/thato/Downloads/car-app/src/components/messages/MessagesView.tsx"],"sourcesContent":["import React, { useState, useEffect, useRef, useMemo } from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport { \n  MessageCircle, \n  Search, \n  Send, \n  User, \n  ArrowLeft, \n  MoreVertical,\n  Check,\n  CheckCheck,\n  Phone,\n  Video,\n  Info\n} from 'lucide-react';\nimport { useApp } from '../../context/AppContext.tsx';\nimport { Message, User as UserType, Conversation } from '../../types/index.ts';\n\ninterface TypingIndicator {\n  userId: string;\n  conversationId: string;\n  timestamp: number;\n}\n\nexport function MessagesView() {\n  const { state, sendMessage, markMessagesAsRead, loadUserMessages } = useApp();\n  const [selectedConversation, setSelectedConversation] = useState<string | null>(null);\n  const [messageText, setMessageText] = useState('');\n  const [searchTerm, setSearchTerm] = useState('');\n  const [loading, setLoading] = useState(false);\n  const [typingUsers, setTypingUsers] = useState<TypingIndicator[]>([]);\n  const [isTyping, setIsTyping] = useState(false);\n  const messagesEndRef = useRef<HTMLDivElement>(null);\n  const typingTimeoutRef = useRef<NodeJS.Timeout>();\n\n  // Load messages on component mount\n  useEffect(() => {\n    loadUserMessages();\n  }, [loadUserMessages]);\n\n  // Auto-scroll to bottom when new messages arrive\n  useEffect(() => {\n    scrollToBottom();\n  }, [state.messages, selectedConversation]);\n\n  // Clean up typing indicators that are too old\n  useEffect(() => {\n    const interval = setInterval(() => {\n      const now = Date.now();\n      setTypingUsers(prev => prev.filter(typing => now - typing.timestamp < 3000));\n    }, 1000);\n\n    return () => clearInterval(interval);\n  }, []);\n\n  const scrollToBottom = () => {\n    messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' });\n  };\n\n  // Create conversations from messages\n  const conversations = useMemo(() => {\n    const convMap = new Map<string, Conversation>();\n    \n    state.messages.forEach(message => {\n      const otherUserId = message.senderId === state.currentUser?.id \n        ? message.receiverId \n        : message.senderId;\n      \n      const conversationId = [state.currentUser?.id, otherUserId].sort().join('-');\n      \n      if (!convMap.has(conversationId)) {\n        convMap.set(conversationId, {\n          id: conversationId,\n          participants: [state.currentUser?.id!, otherUserId],\n          lastMessage: message,\n          unreadCount: 0,\n          updatedAt: message.timestamp\n        });\n      } else {\n        const existing = convMap.get(conversationId)!;\n        if (new Date(message.timestamp) > new Date(existing.lastMessage.timestamp)) {\n          existing.lastMessage = message;\n          existing.updatedAt = message.timestamp;\n        }\n      }\n    });\n\n    // Calculate unread counts\n    convMap.forEach(conversation => {\n      const unreadMessages = state.messages.filter(msg => \n        msg.receiverId === state.currentUser?.id &&\n        !msg.read &&\n        (msg.senderId === conversation.participants[0] || msg.senderId === conversation.participants[1])\n      );\n      conversation.unreadCount = unreadMessages.length;\n    });\n\n    return Array.from(convMap.values()).sort((a, b) => \n      new Date(b.updatedAt).getTime() - new Date(a.updatedAt).getTime()\n    );\n  }, [state.messages, state.currentUser?.id, state.users]);\n\n  // Filter conversations based on search\n  const filteredConversations = useMemo(() => {\n    if (!searchTerm) return conversations;\n    \n    return conversations.filter(conversation => {\n      const otherUserId = conversation.participants.find(p => p !== state.currentUser?.id);\n      const otherUser = state.users.find(u => u.id === otherUserId);\n      return otherUser?.username.toLowerCase().includes(searchTerm.toLowerCase());\n    });\n  }, [conversations, searchTerm, state.users, state.currentUser?.id]);\n\n  // Get messages for selected conversation\n  const conversationMessages = useMemo(() => {\n    if (!selectedConversation) return [];\n    \n    const conversation = conversations.find(c => c.id === selectedConversation);\n    if (!conversation) return [];\n    \n    return state.messages\n      .filter(msg => {\n        const participants = conversation.participants;\n        return (\n          (msg.senderId === participants[0] && msg.receiverId === participants[1]) ||\n          (msg.senderId === participants[1] && msg.receiverId === participants[0])\n        );\n      })\n      .sort((a, b) => new Date(a.timestamp).getTime() - new Date(b.timestamp).getTime());\n  }, [selectedConversation, conversations, state.messages]);\n\n  // Get other user in selected conversation\n  const selectedConversationUser = useMemo(() => {\n    if (!selectedConversation) return null;\n    \n    const conversation = conversations.find(c => c.id === selectedConversation);\n    if (!conversation) return null;\n    \n    const otherUserId = conversation.participants.find(p => p !== state.currentUser?.id);\n    return state.users.find(u => u.id === otherUserId) || null;\n  }, [selectedConversation, conversations, state.users, state.currentUser?.id]);\n\n  const handleSendMessage = async () => {\n    if (!messageText.trim() || !selectedConversationUser || loading) return;\n\n    setLoading(true);\n    try {\n      await sendMessage({\n        senderId: state.currentUser!.id,\n        receiverId: selectedConversationUser.id,\n        content: messageText.trim()\n      });\n      setMessageText('');\n      setIsTyping(false);\n    } catch (error) {\n      console.error('Error sending message:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleKeyPress = (e: React.KeyboardEvent) => {\n    if (e.key === 'Enter' && !e.shiftKey) {\n      e.preventDefault();\n      handleSendMessage();\n    }\n  };\n\n  const handleTyping = (value: string) => {\n    setMessageText(value);\n    \n    if (value.trim() && !isTyping) {\n      setIsTyping(true);\n      // In a real app, you'd emit typing indicator to other users via WebSocket\n    }\n\n    // Clear typing indicator after 2 seconds of no typing\n    if (typingTimeoutRef.current) {\n      clearTimeout(typingTimeoutRef.current);\n    }\n    \n    typingTimeoutRef.current = setTimeout(() => {\n      setIsTyping(false);\n    }, 2000);\n  };\n\n  const handleConversationSelect = async (conversationId: string) => {\n    setSelectedConversation(conversationId);\n    \n    // Mark messages as read\n    const conversation = conversations.find(c => c.id === conversationId);\n    if (conversation && conversation.unreadCount > 0) {\n      try {\n        await markMessagesAsRead(conversationId);\n      } catch (error) {\n        console.error('Error marking messages as read:', error);\n      }\n    }\n  };\n\n  const formatTime = (timestamp: string) => {\n    const date = new Date(timestamp);\n    const now = new Date();\n    const diffInHours = (now.getTime() - date.getTime()) / (1000 * 60 * 60);\n    \n    if (diffInHours < 24) {\n      return date.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });\n    } else if (diffInHours < 168) { // 7 days\n      return date.toLocaleDateString([], { weekday: 'short' });\n    } else {\n      return date.toLocaleDateString([], { month: 'short', day: 'numeric' });\n    }\n  };\n\n  const formatMessageTime = (timestamp: string) => {\n    return new Date(timestamp).toLocaleTimeString([], { \n      hour: '2-digit', \n      minute: '2-digit' \n    });\n  };\n\n  const renderConversationsList = () => (\n    <div className=\"w-full lg:w-96 border-r border-primary-700/30 flex flex-col\">\n      {/* Header */}\n      <div className=\"p-4 border-b border-primary-700/30\">\n        <h2 className=\"text-xl font-bold text-primary-100 mb-4\">Messages</h2>\n        \n        {/* Search */}\n        <div className=\"relative\">\n          <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-primary-400\" />\n          <input\n            type=\"text\"\n            placeholder=\"Search conversations...\"\n            value={searchTerm}\n            onChange={(e) => setSearchTerm(e.target.value)}\n            className=\"input-field pl-10 text-sm\"\n          />\n        </div>\n      </div>\n\n      {/* Conversations List */}\n      <div className=\"flex-1 overflow-y-auto\">\n        {filteredConversations.length === 0 ? (\n          <div className=\"p-4 text-center\">\n            <MessageCircle className=\"w-12 h-12 mx-auto mb-4 text-primary-400\" />\n            <p className=\"text-primary-300\">No conversations yet</p>\n            <p className=\"text-sm text-primary-400 mt-1\">\n              Start trading to begin messaging with other users\n            </p>\n          </div>\n        ) : (\n          <div className=\"space-y-1 p-2\">\n            {filteredConversations.map((conversation) => {\n              const otherUserId = conversation.participants.find(p => p !== state.currentUser?.id);\n              const otherUser = state.users.find(u => u.id === otherUserId);\n              const isSelected = selectedConversation === conversation.id;\n              \n              return (\n                <motion.div\n                  key={conversation.id}\n                  whileHover={{ scale: 1.02 }}\n                  whileTap={{ scale: 0.98 }}\n                  onClick={() => handleConversationSelect(conversation.id)}\n                  className={`p-3 rounded-lg cursor-pointer transition-all ${\n                    isSelected\n                      ? 'bg-primary-600/30 border border-primary-500/50'\n                      : 'hover:bg-primary-800/30'\n                  }`}\n                >\n                  <div className=\"flex items-center space-x-3\">\n                    {/* Avatar */}\n                    <div className=\"relative\">\n                      <div className=\"w-12 h-12 bg-primary-800/50 rounded-full flex items-center justify-center\">\n                        {otherUser?.avatar ? (\n                          <img\n                            src={otherUser.avatar}\n                            alt={otherUser.username}\n                            className=\"w-full h-full object-cover rounded-full\"\n                          />\n                        ) : (\n                          <User className=\"w-6 h-6 text-primary-300\" />\n                        )}\n                      </div>\n                      {/* Online indicator could go here */}\n                    </div>\n                    \n                    {/* Content */}\n                    <div className=\"flex-1 min-w-0\">\n                      <div className=\"flex items-center justify-between\">\n                        <h4 className=\"font-medium text-primary-100 truncate\">\n                          @{otherUser?.username || 'Unknown'}\n                        </h4>\n                        <span className=\"text-xs text-primary-400\">\n                          {formatTime(conversation.lastMessage.timestamp)}\n                        </span>\n                      </div>\n                      \n                      <div className=\"flex items-center justify-between mt-1\">\n                        <p className=\"text-sm text-primary-300 truncate\">\n                          {conversation.lastMessage.senderId === state.currentUser?.id && 'You: '}\n                          {conversation.lastMessage.content}\n                        </p>\n                        {conversation.unreadCount > 0 && (\n                          <span className=\"bg-blue-500 text-white text-xs px-2 py-1 rounded-full min-w-[20px] text-center\">\n                            {conversation.unreadCount > 99 ? '99+' : conversation.unreadCount}\n                          </span>\n                        )}\n                      </div>\n                    </div>\n                  </div>\n                </motion.div>\n              );\n            })}\n          </div>\n        )}\n      </div>\n    </div>\n  );\n\n  const renderChatInterface = () => {\n    if (!selectedConversation || !selectedConversationUser) {\n      return (\n        <div className=\"flex-1 flex items-center justify-center\">\n          <div className=\"text-center\">\n            <MessageCircle className=\"w-16 h-16 mx-auto mb-4 text-primary-400\" />\n            <h3 className=\"text-xl font-semibold text-primary-100 mb-2\">Select a conversation</h3>\n            <p className=\"text-primary-300\">Choose a conversation to start messaging</p>\n          </div>\n        </div>\n      );\n    }\n\n    const typingUsersInConversation = typingUsers.filter(t => t.conversationId === selectedConversation);\n\n    return (\n      <div className=\"flex-1 flex flex-col\">\n        {/* Chat Header */}\n        <div className=\"p-4 border-b border-primary-700/30 flex items-center justify-between\">\n          <div className=\"flex items-center space-x-3\">\n            <button\n              onClick={() => setSelectedConversation(null)}\n              className=\"lg:hidden p-2 hover:bg-primary-800/50 rounded-full transition-colors\"\n            >\n              <ArrowLeft className=\"w-5 h-5 text-primary-300\" />\n            </button>\n            \n            <div className=\"w-10 h-10 bg-primary-800/50 rounded-full flex items-center justify-center\">\n              {selectedConversationUser.avatar ? (\n                <img\n                  src={selectedConversationUser.avatar}\n                  alt={selectedConversationUser.username}\n                  className=\"w-full h-full object-cover rounded-full\"\n                />\n              ) : (\n                <User className=\"w-5 h-5 text-primary-300\" />\n              )}\n            </div>\n            \n            <div>\n              <h3 className=\"font-semibold text-primary-100\">\n                @{selectedConversationUser.username}\n              </h3>\n              {typingUsersInConversation.length > 0 && (\n                <p className=\"text-sm text-blue-400\">typing...</p>\n              )}\n            </div>\n          </div>\n          \n          <div className=\"flex items-center space-x-2\">\n            <button className=\"p-2 hover:bg-primary-800/50 rounded-full transition-colors\">\n              <Phone className=\"w-5 h-5 text-primary-300\" />\n            </button>\n            <button className=\"p-2 hover:bg-primary-800/50 rounded-full transition-colors\">\n              <Video className=\"w-5 h-5 text-primary-300\" />\n            </button>\n            <button className=\"p-2 hover:bg-primary-800/50 rounded-full transition-colors\">\n              <Info className=\"w-5 h-5 text-primary-300\" />\n            </button>\n          </div>\n        </div>\n\n        {/* Messages */}\n        <div className=\"flex-1 overflow-y-auto p-4 space-y-4\">\n          {conversationMessages.length === 0 ? (\n            <div className=\"text-center py-8\">\n              <p className=\"text-primary-300\">No messages yet</p>\n              <p className=\"text-sm text-primary-400 mt-1\">Send a message to start the conversation</p>\n            </div>\n          ) : (\n            conversationMessages.map((message, index) => {\n              const isOwn = message.senderId === state.currentUser?.id;\n              const showAvatar = index === 0 || \n                conversationMessages[index - 1].senderId !== message.senderId;\n              const isLastInGroup = index === conversationMessages.length - 1 ||\n                conversationMessages[index + 1].senderId !== message.senderId;\n              \n              return (\n                <motion.div\n                  key={message.id}\n                  initial={{ opacity: 0, y: 20 }}\n                  animate={{ opacity: 1, y: 0 }}\n                  className={`flex ${isOwn ? 'justify-end' : 'justify-start'}`}\n                >\n                  <div className={`flex items-end space-x-2 max-w-xs lg:max-w-md ${isOwn ? 'flex-row-reverse space-x-reverse' : ''}`}>\n                    {/* Avatar */}\n                    <div className=\"w-8 h-8 flex-shrink-0\">\n                      {showAvatar && !isOwn && (\n                        <div className=\"w-8 h-8 bg-primary-800/50 rounded-full flex items-center justify-center\">\n                          {selectedConversationUser.avatar ? (\n                            <img\n                              src={selectedConversationUser.avatar}\n                              alt={selectedConversationUser.username}\n                              className=\"w-full h-full object-cover rounded-full\"\n                            />\n                          ) : (\n                            <User className=\"w-4 h-4 text-primary-300\" />\n                          )}\n                        </div>\n                      )}\n                    </div>\n                    \n                    {/* Message Bubble */}\n                    <div\n                      className={`px-4 py-2 rounded-2xl ${\n                        isOwn\n                          ? 'bg-blue-600 text-white'\n                          : 'bg-primary-700/50 text-primary-100'\n                      } ${\n                        isLastInGroup ? '' : 'mb-1'\n                      }`}\n                    >\n                      <p className=\"text-sm whitespace-pre-wrap\">{message.content}</p>\n                      \n                      {/* Message metadata */}\n                      <div className={`flex items-center justify-end mt-1 space-x-1 ${\n                        isOwn ? 'text-blue-200' : 'text-primary-400'\n                      }`}>\n                        <span className=\"text-xs\">\n                          {formatMessageTime(message.timestamp)}\n                        </span>\n                        {isOwn && (\n                          <div className=\"flex items-center\">\n                            {message.read ? (\n                              <CheckCheck className=\"w-3 h-3\" />\n                            ) : (\n                              <Check className=\"w-3 h-3\" />\n                            )}\n                          </div>\n                        )}\n                      </div>\n                    </div>\n                  </div>\n                </motion.div>\n              );\n            })\n          )}\n          \n          {/* Typing Indicator */}\n          {typingUsersInConversation.length > 0 && (\n            <motion.div\n              initial={{ opacity: 0, y: 10 }}\n              animate={{ opacity: 1, y: 0 }}\n              className=\"flex items-end space-x-2\"\n            >\n              <div className=\"w-8 h-8 bg-primary-800/50 rounded-full flex items-center justify-center\">\n                <User className=\"w-4 h-4 text-primary-300\" />\n              </div>\n              <div className=\"bg-primary-700/50 px-4 py-2 rounded-2xl\">\n                <div className=\"flex space-x-1\">\n                  <div className=\"w-2 h-2 bg-primary-400 rounded-full animate-bounce\" style={{ animationDelay: '0ms' }} />\n                  <div className=\"w-2 h-2 bg-primary-400 rounded-full animate-bounce\" style={{ animationDelay: '150ms' }} />\n                  <div className=\"w-2 h-2 bg-primary-400 rounded-full animate-bounce\" style={{ animationDelay: '300ms' }} />\n                </div>\n              </div>\n            </motion.div>\n          )}\n          \n          <div ref={messagesEndRef} />\n        </div>\n\n        {/* Message Input */}\n        <div className=\"p-4 border-t border-primary-700/30\">\n          <div className=\"flex items-end space-x-3\">\n            <div className=\"flex-1\">\n              <textarea\n                value={messageText}\n                onChange={(e) => handleTyping(e.target.value)}\n                onKeyPress={handleKeyPress}\n                placeholder=\"Type a message...\"\n                className=\"input-field resize-none h-10 max-h-32\"\n                rows={1}\n                disabled={loading}\n              />\n            </div>\n            <button\n              onClick={handleSendMessage}\n              disabled={!messageText.trim() || loading}\n              className={`p-3 rounded-full transition-all ${\n                messageText.trim() && !loading\n                  ? 'bg-blue-600 hover:bg-blue-700 text-white'\n                  : 'bg-primary-700/50 text-primary-400 cursor-not-allowed'\n              }`}\n            >\n              <Send className=\"w-5 h-5\" />\n            </button>\n          </div>\n        </div>\n      </div>\n    );\n  };\n\n  return (\n    <div className=\"h-full flex\">\n      {/* Mobile: Show either conversations list or chat */}\n      <div className=\"lg:hidden w-full\">\n        {selectedConversation ? renderChatInterface() : renderConversationsList()}\n      </div>\n      \n      {/* Desktop: Show both side by side */}\n      <div className=\"hidden lg:flex w-full\">\n        {renderConversationsList()}\n        {renderChatInterface()}\n      </div>\n    </div>\n  );\n} "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}